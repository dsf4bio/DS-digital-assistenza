<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Essenza | Menu Digitale Definitivo</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      /* Colori principali - palette raffinata */
      --primary: #8C6D43;
      --primary-light: #A68A64;
      --primary-dark: #5D4037;
      --secondary: #F8F4E9;
      --accent: #D7CCC8;
      --dark: #2E1F15;
      --light: #FFFFFF;
      --text: #3E2723;
      --text-light: #5D4037;
      
      /* Effetti */
      --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      --radius-sm: 8px;
      --radius-md: 16px;
      --radius-lg: 24px;
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      --transition-fast: all 0.15s ease;
      
      /* Dimensioni */
      --header-height: 280px;
      --search-height: 60px;
      --tab-height: 65px;
      --footer-height: 0px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--light);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      height: auto;
      overflow-x: hidden;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    /* --- ANIMAZIONI AVANZATE --- */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(140, 109, 67, 0.4); }
      70% { box-shadow: 0 0 0 15px rgba(140, 109, 67, 0); }
      100% { box-shadow: 0 0 0 0 rgba(140, 109, 67, 0); }
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* --- HEADER CON PARALLASSE AVANZATA --- */
    .header {
      height: var(--header-height);
      position: relative;
      overflow: hidden;
      z-index: 10;
    }

    .header-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.7)),
                  url('https://images.unsplash.com/photo-1513104890138-7c749659a591?w=1600') center/cover no-repeat;
      transform: scale(1.05);
      transition: transform 0.5s ease-out;
    }

    .header-content {
      position: relative;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 20px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
    }

    .logo {
      font-family: 'Playfair Display', serif;
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo i {
      animation: rotate 20s linear infinite;
    }

    .tagline {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 12px;
      max-width: 90%;
    }

    .info-bar {
      display: flex;
      gap: 16px;
      font-size: 0.9rem;
      opacity: 0.9;
      margin-top: 8px;
    }

    .info-bar span {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    /* --- BARRA DI RICERCA INTELLIGENTE --- */
    .search-container {
      height: var(--search-height);
      background: white;
      padding: 0 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
      z-index: 15;
      box-shadow: var(--shadow-sm);
    }

    .search-box {
      flex: 1;
      background: #f8f9fa;
      border-radius: 30px;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
    }

    .search-icon {
      color: var(--primary);
      font-size: 1.1rem;
    }

    .search-input {
      flex: 1;
      border: none;
      background: transparent;
      font-size: 0.95rem;
      color: var(--dark);
      outline: none;
      padding: 4px 0;
      min-width: 0;
    }

    .search-input::placeholder {
      color: #888;
    }

    .voice-search {
      color: var(--primary);
      font-size: 1.2rem;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition-fast);
    }

    .voice-search:hover {
      background: rgba(140, 109, 67, 0.1);
    }

    /* --- NAVIGAZIONE A SCORRIMENTO ORIZZONTALE --- */
    .categories-scroll {
      height: var(--tab-height);
      background: white;
      overflow-x: auto;
      scrollbar-width: none;
      position: sticky;
      top: var(--search-height);
      z-index: 14;
      padding: 0 10px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .categories-scroll::-webkit-scrollbar {
      display: none;
    }

    .categories {
      display: flex;
      height: 100%;
      align-items: center;
      gap: 16px;
      padding: 0 10px;
    }

    .category {
      min-width: 120px;
      height: 45px;
      background: #f8f9fa;
      border-radius: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-weight: 500;
      color: #666;
      cursor: pointer;
      transition: var(--transition);
      flex-shrink: 0;
      position: relative;
      overflow: hidden;
    }

    .category.active {
      background: var(--primary);
      color: white;
      font-weight: 600;
      box-shadow: var(--shadow-sm);
      transform: translateY(-3px);
    }

    .category.active::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 50%;
      transform: translateX(-50%);
      width: 8px;
      height: 8px;
      background: var(--primary);
      border-radius: 50%;
    }

    .category i {
      font-size: 1.1rem;
    }

    /* --- CONTENUTO PRINCIPALE --- */
    .content {
      flex: 1;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      position: relative;
    }

    .menu-container {
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    .category-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem;
      color: var(--dark);
      margin: 25px 0 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .category-title i {
      color: var(--primary);
    }

    /* --- GRIGLIA PIATTI MODERNA --- */
    .dishes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 24px;
    }

    .dish-card {
      background: white;
      border-radius: var(--radius-md);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
      cursor: pointer;
      position: relative;
      display: flex;
      flex-direction: column;
      height: 100%;
      transform: translateY(0);
    }

    .dish-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
      z-index: 2;
    }

    .dish-image-container {
      position: relative;
      height: 180px;
      overflow: hidden;
    }

    .dish-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition);
    }

    .dish-card:hover .dish-image {
      transform: scale(1.05);
    }

    .dish-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--primary);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      z-index: 2;
    }

    .dish-content {
      padding: 18px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .dish-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .dish-name {
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--dark);
      line-height: 1.3;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .dish-price {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--primary);
      white-space: nowrap;
      margin-left: 10px;
    }

    .dish-desc {
      color: #666;
      font-size: 0.9rem;
      line-height: 1.5;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      margin: 8px 0;
      flex: 1;
    }

    .dish-tags {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-top: 8px;
    }

    .tag {
      font-size: 0.7rem;
      padding: 3px 10px;
      border-radius: 20px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      white-space: nowrap;
    }

    .tag.veg { background: #E8F5E9; color: #2E7D32; }
    .tag.spicy { background: #FFF3E0; color: #E65100; }
    .tag.best { background: #FFF8E1; color: #5D4037; }
    .tag.new { background: #E3F2FD; color: #1976D2; }
    .tag.seasonal { background: #FBE9E7; color: #D84315; }

    /* --- MODAL DETTAGLIO PIATTO AVANZATO --- */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      display: none;
      flex-direction: column;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .modal.active {
      display: flex;
      opacity: 1;
      pointer-events: all;
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      z-index: 10;
      transition: var(--transition-fast);
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(90deg);
    }

    .modal-content {
      flex: 1;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      padding: 20px;
      display: flex;
      flex-direction: column;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    .modal-image-container {
      position: relative;
      height: 300px;
      border-radius: var(--radius-md);
      overflow: hidden;
      margin-bottom: 20px;
      box-shadow: var(--shadow-lg);
    }

    .modal-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .modal-title {
      font-family: 'Playfair Display', serif;
      font-size: 2.2rem;
      color: white;
      margin-bottom: 10px;
      line-height: 1.2;
    }

    .modal-price {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      color: var(--primary-light);
      font-weight: 700;
      margin-bottom: 15px;
    }

    .modal-description {
      color: #e0e0e0;
      line-height: 1.7;
      font-size: 1.05rem;
      margin-bottom: 25px;
      flex: 1;
    }

    /* --- NUOVA SEZIONE: ORIGINI E STORIA --- */
    .story-section {
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-sm);
      padding: 20px;
      margin-bottom: 25px;
    }

    .story-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      color: var(--primary-light);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .story-content {
      color: #e0e0e0;
      line-height: 1.6;
    }

    /* --- NUOVA SEZIONE: INGREDIENTI DI QUALIT√Ä --- */
    .ingredients-section {
      margin-bottom: 25px;
    }

    .ingredients-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      color: var(--primary-light);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .ingredients-list {
      list-style: none;
    }

    .ingredient-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 12px;
    }

    .ingredient-icon {
      color: var(--primary-light);
      font-size: 1.1rem;
      min-width: 24px;
      margin-top: 4px;
    }

    .ingredient-name {
      font-weight: 600;
      color: white;
      margin-bottom: 4px;
    }

    .ingredient-details {
      color: #b0b0b0;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .ingredient-source {
      display: inline-block;
      background: rgba(255, 255, 255, 0.1);
      color: var(--primary-light);
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      margin-top: 4px;
    }

    /* --- NUOVA SEZIONE: ABBINAMENTI --- */
    .pairing-section {
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-sm);
      padding: 20px;
      margin-bottom: 25px;
    }

    .pairing-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      color: var(--primary-light);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pairing-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }

    .pairing-card {
      background: rgba(255, 255, 255, 0.08);
      border-radius: var(--radius-sm);
      padding: 15px;
      transition: var(--transition-fast);
    }

    .pairing-card:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
    }

    .pairing-icon {
      font-size: 1.5rem;
      color: var(--primary-light);
      margin-bottom: 10px;
    }

    .pairing-name {
      font-weight: 600;
      color: white;
      margin-bottom: 5px;
    }

    .pairing-desc {
      color: #b0b0b0;
      font-size: 0.85rem;
      line-height: 1.4;
    }

    /* --- SEZIONE PERSONALIZZAZIONE --- */
    .customization-section {
      margin-bottom: 25px;
    }

    .customization-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      color: var(--primary-light);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .customization-options {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 12px;
    }

    .option-item {
      background: rgba(255, 255, 255, 0.08);
      border-radius: var(--radius-sm);
      padding: 12px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition-fast);
      border: 1px solid transparent;
    }

    .option-item:hover, .option-item.active {
      background: rgba(255, 255, 255, 0.15);
      border-color: var(--primary-light);
    }

    .option-icon {
      font-size: 1.2rem;
      color: var(--primary-light);
      margin-bottom: 8px;
    }

    .option-label {
      font-size: 0.85rem;
      color: white;
    }

    .option-price {
      color: var(--primary-light);
      font-size: 0.8rem;
      margin-top: 4px;
      display: block;
    }

    /* --- SEZIONE FOTOGRAFIA ALTA QUALIT√Ä --- */
    .gallery-section {
      margin-bottom: 25px;
    }

    .gallery-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      color: var(--primary-light);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .gallery-item {
      border-radius: var(--radius-sm);
      overflow: hidden;
      height: 150px;
      position: relative;
    }

    .gallery-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition);
    }

    .gallery-item:hover .gallery-image {
      transform: scale(1.05);
    }

    .gallery-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
      padding: 10px;
      opacity: 0;
      transition: var(--transition);
    }

    .gallery-item:hover .gallery-overlay {
      opacity: 1;
    }

    .gallery-caption {
      color: white;
      font-size: 0.8rem;
    }

    /* --- SEZIONE "IL NOSTRO APPROCCIO" --- */
    .approach-section {
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-sm);
      padding: 20px;
      margin-top: 25px;
    }

    .approach-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      color: var(--primary-light);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .approach-content {
      color: #e0e0e0;
      line-height: 1.6;
    }

    .approach-highlights {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .highlight-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    .highlight-icon {
      color: var(--primary-light);
      font-size: 1.1rem;
      min-width: 24px;
      margin-top: 4px;
    }

    .highlight-text {
      color: #b0b0b0;
      font-size: 0.9rem;
    }

    /* --- SEZIONE PIATTI DEL GIORNO --- */
    .daily-specials {
      background: linear-gradient(135deg, rgba(140, 109, 67, 0.1), rgba(93, 64, 55, 0.15));
      border-radius: var(--radius-md);
      padding: 20px;
      margin: 30px 0;
    }

    .daily-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.6rem;
      color: var(--primary-dark);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .specials-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
    }

    .special-card {
      background: white;
      border-radius: var(--radius-sm);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
    }

    .special-image {
      width: 100%;
      height: 140px;
      object-fit: cover;
    }

    .special-content {
      padding: 15px;
    }

    .special-name {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .special-desc {
      color: #666;
      font-size: 0.85rem;
      margin-bottom: 10px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .special-price {
      font-weight: 700;
      color: var(--primary);
    }

    /* --- SEZIONE "LA NOSTRA STORIA" --- */
    .story-banner {
      background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.6)), 
                  url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=1600') center/cover no-repeat;
      border-radius: var(--radius-md);
      height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
      padding: 20px;
      margin: 30px 0;
      position: relative;
      overflow: hidden;
    }

    .story-banner::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(93, 64, 55, 0.7);
    }

    .story-banner-content {
      position: relative;
      z-index: 2;
      max-width: 800px;
    }

    .story-banner-title {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .story-banner-text {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    /* --- CAROUSEL PER PROMOZIONI --- */
    .promo-carousel {
      padding: 20px 0;
      position: relative;
      overflow: hidden;
      margin: 20px 0;
    }

    .promo-track {
      display: flex;
      transition: transform 0.5s ease;
      height: 100%;
    }

    .promo-item {
      min-width: calc(90% - 20px);
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      border-radius: var(--radius-md);
      color: white;
      padding: 20px;
      margin-right: 20px;
      position: relative;
      overflow: hidden;
      flex-shrink: 0;
    }

    .promo-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><polygon fill="rgba(255,255,255,0.1)" points="0,100 100,0 100,100"/></svg>');
      background-size: cover;
    }

    .promo-content {
      position: relative;
      z-index: 2;
    }

    .promo-badge {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .promo-title {
      font-size: 1.4rem;
      margin-bottom: 8px;
      line-height: 1.2;
    }

    .promo-desc {
      opacity: 0.9;
      margin-bottom: 15px;
      line-height: 1.5;
    }

    .promo-price {
      font-size: 1.8rem;
      font-weight: 700;
      color: #FFD700;
    }

    .carousel-controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }

    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #ddd;
      cursor: pointer;
      transition: var(--transition-fast);
    }

    .carousel-dot.active {
      background: white;
      transform: scale(1.3);
    }

    /* --- ELEMENTI TEMPORANEI --- */
    .no-results {
      grid-column: 1 / -1;
      text-align: center;
      padding: 60px 20px;
      color: #888;
    }

    .no-results i {
      font-size: 3.5rem;
      margin-bottom: 15px;
      color: #ddd;
      animation: float 3s ease-in-out infinite;
    }

    .no-results h3 {
      font-size: 1.4rem;
      margin-bottom: 10px;
      color: var(--dark);
    }

    .suggested-searches {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
    }

    .suggested-tag {
      background: #f0f0f0;
      padding: 6px 15px;
      border-radius: 20px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: var(--transition-fast);
    }

    .suggested-tag:hover {
      background: var(--primary);
      color: white;
    }

    /* --- RESPONSIVE --- */
    @media (max-width: 768px) {
      :root {
        --header-height: 240px;
      }
      
      .dishes-grid {
        grid-template-columns: 1fr;
      }
      
      .modal-image-container {
        height: 220px;
      }
      
      .modal-title {
        font-size: 1.8rem;
      }
      
      .modal-price {
        font-size: 1.6rem;
      }
      
      .gallery-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      :root {
        --header-height: 200px;
        --search-height: 55px;
        --tab-height: 55px;
      }
      
      .logo {
        font-size: 1.8rem;
      }
      
      .tagline {
        font-size: 0.95rem;
      }
      
      .info-bar {
        gap: 10px;
        font-size: 0.8rem;
      }
      
      .category-title {
        font-size: 1.5rem;
        margin: 20px 0 12px;
      }
      
      .dish-name {
        font-size: 1.1rem;
      }
      
      .dish-price {
        font-size: 1.2rem;
      }
      
      .modal-title {
        font-size: 1.5rem;
      }
      
      .modal-price {
        font-size: 1.4rem;
      }
      
      .modal-description {
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body>

  <div class="app-container">
    
    <!-- Header con effetto parallasse avanzato -->
    <div class="header">
      <div class="header-bg" id="parallaxBg"></div>
      <div class="header-content">
        <div class="logo">
          <i class="fas fa-utensils"></i> Essenza
        </div>
        <p class="tagline">Dove la tradizione incontra l'eccellenza</p>
        <div class="info-bar">
          <span><i class="fas fa-map-marker-alt"></i> Piazza del Gusto 15, Centro Storico</span>
          <span><i class="fas fa-clock"></i> 12:00 - 23:00</span>
          <span><i class="fas fa-star"></i> 4.9‚òÖ (1.5k recensioni)</span>
        </div>
      </div>
    </div>

    <!-- Barra di ricerca avanzata -->
    <div class="search-container">
      <div class="search-box">
        <i class="fas fa-search search-icon"></i>
        <input type="text" id="searchInput" class="search-input" placeholder="Cerca un piatto, ingrediente o categoria..." autocomplete="off">
        <i class="fas fa-microphone voice-search" id="voiceSearch"></i>
      </div>
    </div>

    <!-- Navigazione a scorrimento orizzontale -->
    <div class="categories-scroll">
      <div class="categories" id="categoriesNav">
        <div class="category active" data-category="all">
          <i class="fas fa-th"></i> Tutto
        </div>
        <div class="category" data-category="antipasti">
          <i class="fas fa-apple-alt"></i> Antipasti
        </div>
        <div class="category" data-category="primi">
          <i class="fas fa-utensils"></i> Primi
        </div>
        <div class="category" data-category="pizze">
          <i class="fas fa-pizza-slice"></i> Pizze
        </div>
        <div class="category" data-category="secondi">
          <i class="fas fa-drumstick-bite"></i> Secondi
        </div>
        <div class="category" data-category="dolci">
          <i class="fas fa-ice-cream"></i> Dolci
        </div>
        <div class="category" data-category="bevande">
          <i class="fas fa-wine-glass-alt"></i> Bevande
        </div>
      </div>
    </div>

    <!-- Contenuto principale -->
    <div class="content">
      <div class="menu-container">
        
        <!-- Carousel promozioni -->
        <div class="promo-carousel">
          <div class="promo-track" id="promoTrack">
            <div class="promo-item">
              <div class="promo-content">
                <span class="promo-badge">ESCLUSIVA</span>
                <h2 class="promo-title">Men√π Degustazione</h2>
                <p class="promo-desc">5 portate selezionate dal nostro chef, accompagnate da una storia che racconta la nostra tradizione.</p>
                <div class="promo-price">‚Ç¨45,00</div>
              </div>
            </div>
            <div class="promo-item">
              <div class="promo-content">
                <span class="promo-badge">NUOVO</span>
                <h2 class="promo-title">Menu Primavera</h2>
                <p class="promo-desc">Scopri le nuove proposte stagionali con ingredienti freschi e di qualit√†, direttamente dai nostri produttori.</p>
                <div class="promo-price">Da ‚Ç¨18,00</div>
              </div>
            </div>
            <div class="promo-item">
              <div class="promo-content">
                <span class="promo-badge">TOP VENDUTO</span>
                <h2 class="promo-title">Pizza Tricolore</h2>
                <p class="promo-desc">Pomodoro San Marzano, mozzarella di bufala, pesto genovese e scaglie di parmigiano DOP.</p>
                <div class="promo-price">‚Ç¨14,00</div>
              </div>
            </div>
          </div>
          <div class="carousel-controls" id="carouselDots">
            <div class="carousel-dot active"></div>
            <div class="carousel-dot"></div>
            <div class="carousel-dot"></div>
          </div>
        </div>

        <!-- Sezione "La Nostra Storia" -->
        <div class="story-banner">
          <div class="story-banner-content">
            <h2 class="story-banner-title">La Nostra Storia</h2>
            <p class="story-banner-text">Dal 1985, portiamo avanti la tradizione culinaria italiana con ingredienti selezionati e passione. Ogni piatto racconta una storia di territorio e dedizione.</p>
          </div>
        </div>

        <!-- Sezione Piatti del Giorno -->
        <div class="daily-specials">
          <h2 class="daily-title"><i class="fas fa-concierge-bell"></i> Piatti del Giorno</h2>
          <div class="specials-grid">
            <div class="special-card">
              <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=600" alt="Special 1" class="special-image">
              <div class="special-content">
                <h3 class="special-name">Risotto allo Zafferano</h3>
                <p class="special-desc">Riso Carnaroli mantecato con zafferano della nostra produzione.</p>
                <div class="special-price">‚Ç¨16,00</div>
              </div>
            </div>
            <div class="special-card">
              <img src="https://images.unsplash.com/photo-1606662472864-6f7794abb6d9?w=600" alt="Special 2" class="special-image">
              <div class="special-content">
                <h3 class="special-name">Spritz Artigianale</h3>
                <p class="special-desc">Bitter prodotto in casa con erbe aromatiche del nostro giardino.</p>
                <div class="special-price">‚Ç¨7,50</div>
              </div>
            </div>
            <div class="special-card">
              <img src="https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600" alt="Special 3" class="special-image">
              <div class="special-content">
                <h3 class="special-name">Tiramis√π Classico</h3>
                <p class="special-desc">La ricetta originale con mascarpone delle nostre montagne.</p>
                <div class="special-price">‚Ç¨7,00</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Antipasti -->
        <h2 class="category-title" id="category-antipasti">
          <i class="fas fa-apple-alt"></i> Antipasti
        </h2>
        <div class="dishes-grid" id="antipasti-grid">
          <div class="dish-card" onclick="openDishModal({
            id: 'antipasto1',
            name: 'Caprese di Bufala',
            price: '‚Ç¨12,00',
            description: 'Pomodori Cuore di Bue, mozzarella di bufala DOP, basilico fresco, olio EVO. Un classico della tradizione italiana che celebra la semplicit√† e la qualit√† degli ingredienti.',
            image: 'https://images.unsplash.com/photo-1541544744-378ca6f009b5?w=1200',
            tags: ['veg', 'best'],
            story: 'La Caprese nasce negli anni \'50 in onore del tricolore italiano. Noi la prepariamo con pomodori dell\'agro siculo, mozzarella di bufala campana DOP e basilico fresco del nostro giardino.',
            ingredients: [
              { name: 'Mozzarella di Bufala', details: 'Prodotto artigianalmente da latte di bufala campana, lavorato a mano secondo il metodo tradizionale.', source: 'Fattoria della Luna, Campania' },
              { name: 'Pomodoro Cuore di Bue', details: 'Variet√† antica coltivata senza pesticidi, raccolta a maturazione perfetta.', source: 'Orto di famiglia, Sicilia' },
              { name: 'Basilico Genovese', details: 'Foglie selezionate a mano, raccolte al mattino per preservare gli oli essenziali.', source: 'Giardino del Ristorante' },
              { name: 'Olio EVO', details: 'Fruttato leggero, ottenuto da olive taggiasche raccolte a mano.', source: 'Frantoio Bertolli, Liguria' }
            ],
            pairings: [
              { name: 'Vermentino', icon: 'fas fa-wine-glass', details: 'Vino bianco fresco con note agrumate che contrasta la dolcezza del pomodoro.' },
              { name: 'Birra Agrumata', icon: 'fas fa-beer', details: 'Birra artigianale con scorze di limone e arancia.' },
              { name: 'Acqua Tonica', icon: 'fas fa-glass-water', details: 'Con foglie di basilico fresco per un tocco aromatico.' }
            ],
            customization: [
              { name: 'Extra Mozzarella', price: '+‚Ç¨2,00', icon: 'fas fa-cheese' },
              { name: 'Olive Taggiasche', price: '+‚Ç¨1,50', icon: 'fas fa-olive' },
              { name: 'Acciughe', price: '+‚Ç¨2,50', icon: 'fas fa-fish' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1541544744-378ca6f009b5?w=600', caption: 'Preparazione artigianale' },
              { src: 'https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=600', caption: 'Presentazione elegante' },
              { src: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=600', caption: 'Ingredienti freschi' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1541544744-378ca6f009b5?w=600" alt="Caprese" class="dish-image">
              <span class="dish-badge">TOP</span>
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Caprese di Bufala</h3>
                <span class="dish-price">‚Ç¨12</span>
              </div>
              <p class="dish-desc">Pomodori Cuore di Bue, mozzarella di bufala DOP, basilico fresco, olio EVO.</p>
              <div class="dish-tags">
                <span class="tag veg">ü•ó Veg</span>
                <span class="tag best">‚≠ê Top</span>
                <span class="tag seasonal">üå± Stagionale</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'antipasto2',
            name: 'Carpaccio di Manzo',
            price: '‚Ç¨15,00',
            description: 'Taglio fine a mano, rucola, scaglie di parmigiano 24 mesi, salsa tartufata. Elegante e raffinato, perfetto per iniziare la cena con stile.',
            image: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=1200',
            tags: ['best'],
            story: 'Il Carpaccio √® nato negli anni \'60 a Venezia. Noi lo prepariamo con fassona piemontese, stagionata per 30 giorni per una tenerezza eccezionale e un sapore intenso.',
            ingredients: [
              { name: 'Fassona Piemontese', details: 'Taglio di filetto stagionato 30 giorni, tagliato a mano con coltello affilato.', source: 'Azienda Agricola Rossi, Piemonte' },
              { name: 'Rucola Selvatica', details: 'Variet√† pi√π piccante e aromatica, coltivata in idrocoltura.', source: 'Orto Bio, Lombardia' },
              { name: 'Parmigiano Reggiano', details: '24 mesi di stagionatura, scaglie fresche al momento.', source: 'Caseificio Ferrari, Emilia' },
              { name: 'Tartufo Nero', details: 'Raccolto nella nostra zona durante la stagione autunnale.', source: 'Cacciatore di Tartufi, Toscana' }
            ],
            pairings: [
              { name: 'Barbera d\'Alba', icon: 'fas fa-wine-glass', details: 'Rosso leggero con acidit√† vivace che pulisce il palato.' },
              { name: 'Prosecco Superiore', icon: 'fas fa-wine-glass', details: 'Per un contrasto fresco e fruttato.' },
              { name: 'Cocktail al Tartufo', icon: 'fas fa-cocktail', details: 'Creazione esclusiva del nostro barman.' }
            ],
            customization: [
              { name: 'Extra Tartufo', price: '+‚Ç¨3,00', icon: 'fas fa-truffle' },
              { name: 'Salsa al Limone', price: 'Inclusa', icon: 'fas fa-lemon' },
              { name: 'Noci Tostate', price: '+‚Ç¨1,50', icon: 'fas fa-seedling' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=600', caption: 'Preparazione del carpaccio' },
              { src: 'https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600', caption: 'Presentazione fine' },
              { src: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=600', caption: 'Ingredienti premium' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=600" alt="Carpaccio" class="dish-image">
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Carpaccio di Manzo</h3>
                <span class="dish-price">‚Ç¨15</span>
              </div>
              <p class="dish-desc">Taglio fine a mano, rucola, scaglie di parmigiano 24 mesi, salsa tartufata.</p>
              <div class="dish-tags">
                <span class="tag best">‚≠ê Top</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'antipasto3',
            name: 'Bruschette Miste',
            price: '‚Ç¨9,00',
            description: '3 pezzi: pomodoro e basilico, crema di olive, funghi trifolati. La tradizione toscana reinterpretata con ingredienti freschi e di stagione.',
            image: 'https://images.unsplash.com/photo-1563240670-a7c7fac1b778?w=1200',
            tags: ['veg'],
            story: 'La bruschetta √® un piatto povero della tradizione contadina toscana. Noi la reinterpretiamo con ingredienti di stagione e pane fatto in casa con farina macinata a pietra.',
            ingredients: [
              { name: 'Pane Toscano', details: 'Lievitazione naturale di 48 ore, cotto nel forno a legna.', source: 'Panificio del Borgo' },
              { name: 'Pomodoro San Marzano', details: 'Variet√† DOP coltivata in terreni vulcanici.', source: 'Azienda Agricola Verde, Campania' },
              { name: 'Olive Taggiasche', details: 'Lavorate a mano per creare una crema morbida e saporita.', source: 'Frantoio Liguria' },
              { name: 'Funghi Porcini', details: 'Raccolti a mano durante la stagione autunnale.', source: 'Monti della Toscana' }
            ],
            pairings: [
              { name: 'Chianti Classico', icon: 'fas fa-wine-glass', details: 'Rosso toscano con buona struttura e acidit√† equilibrata.' },
              { name: 'Vermentino', icon: 'fas fa-wine-glass', details: 'Bianco fresco per le versioni vegetariane.' },
              { name: 'Acqua di Limone', icon: 'fas fa-glass-water', details: 'Con foglie di basilico fresco.' }
            ],
            customization: [
              { name: 'Aglio', price: 'Su richiesta', icon: 'fas fa-pepper-hot' },
              { name: 'Peperoncino', price: '+‚Ç¨0,50', icon: 'fas fa-pepper-hot' },
              { name: 'Extra Olio', price: '+‚Ç¨1,00', icon: 'fas fa-olive' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1563240670-a7c7fac1b778?w=600', caption: 'Bruschetta al pomodoro' },
              { src: 'https://images.unsplash.com/photo-1546241072-48010ad2862c?w=600', caption: 'Bruschetta ai funghi' },
              { src: 'https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=600', caption: 'Pane artigianale' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1563240670-a7c7fac1b778?w=600" alt="Bruschette" class="dish-image">
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Bruschette Miste</h3>
                <span class="dish-price">‚Ç¨9</span>
              </div>
              <p class="dish-desc">3 pezzi: pomodoro e basilico, crema di olive, funghi trifolati.</p>
              <div class="dish-tags">
                <span class="tag veg">ü•ó Veg</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'antipasto4',
            name: 'Tagliere della Casa',
            price: '‚Ç¨19,00',
            description: 'Selezione di salumi artigianali, formaggi stagionati, mostarde e miele. Un viaggio attraverso i sapori del territorio.',
            image: 'https://images.unsplash.com/photo-1541138895495-3e5c9f8c6f2f?w=1200',
            tags: ['best'],
            story: 'Il nostro tagliere rappresenta un viaggio attraverso l\'Italia. Ogni prodotto √® stato selezionato personalmente dal nostro chef in collaborazione con piccoli produttori artigianali.',
            ingredients: [
              { name: 'Prosciutto di Parma', details: '24 mesi di stagionatura, tagliato al momento.', source: 'Salumificio Rossi, Emilia' },
              { name: 'Salame Toscano', details: 'Con pepe nero e vino Chianti, stagionato 12 mesi.', source: 'Salumeria Bianchi, Toscana' },
              { name: 'Formaggio di Capra', details: 'Prodotto con latte di capre allevate al pascolo.', source: 'Caseificio Montanaro, Abruzzo' },
              { name: 'Miele Millefiori', details: 'Raccolto in primavera da api non trattate.', source: 'Apicoltura Verde, Umbria' }
            ],
            pairings: [
              { name: 'Lambrusco', icon: 'fas fa-wine-glass', details: 'Per un contrasto fresco con i salumi.' },
              { name: 'Vino Rosso Naturale', icon: 'fas fa-wine-glass', details: 'Senza solfiti aggiunti, prodotto in biodinamica.' },
              { name: 'Sidro Artigianale', icon: 'fas fa-apple-alt', details: 'Con note fruttate che esaltano i formaggi.' }
            ],
            customization: [
              { name: 'Extra Formaggio', price: '+‚Ç¨3,00', icon: 'fas fa-cheese' },
              { name: 'Frutta Secca', price: '+‚Ç¨2,00', icon: 'fas fa-seedling' },
              { name: 'Confettura Artigianale', price: '+‚Ç¨1,50', icon: 'fas fa-jam' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1541138895495-3e5c9f8c6f2f?w=600', caption: 'Tagliere completo' },
              { src: 'https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600', caption: 'Salumi artigianali' },
              { src: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=600', caption: 'Formaggi selezionati' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1541138895495-3e5c9f8c6f2f?w=600" alt="Tagliere" class="dish-image">
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Tagliere della Casa</h3>
                <span class="dish-price">‚Ç¨19</span>
              </div>
              <p class="dish-desc">Selezione di salumi artigianali, formaggi stagionati, mostarde e miele.</p>
              <div class="dish-tags">
                <span class="tag best">‚≠ê Top</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Primi -->
        <h2 class="category-title" id="category-primi">
          <i class="fas fa-utensils"></i> Primi Piatti
        </h2>
        <div class="dishes-grid" id="primi-grid">
          <div class="dish-card" onclick="openDishModal({
            id: 'primo1',
            name: 'Carbonara Originale',
            price: '‚Ç¨14,00',
            description: 'Guanciale croccante, pecorino romano DOP, tuorlo d\'uovo, pepe nero. La vera ricetta romana, senza panna, mantecata alla perfezione.',
            image: 'https://images.unsplash.com/photo-1612874742237-6526221588e3?w=1200',
            tags: ['best'],
            story: 'La Carbonara √® un piatto nato negli anni \'40 a Roma. La nostra versione rispetta la tradizione con ingredienti di qualit√†: guanciale stagionato, pecorino romano DOP e uova fresche da allevamento a terra.',
            ingredients: [
              { name: 'Guanciale', details: 'Tagliato a mano e stagionato 30 giorni per una croccantezza perfetta.', source: 'Salumificio Romano' },
              { name: 'Pecorino Romano DOP', details: 'Stagionato 8 mesi, grattugiato al momento.', source: 'Caseificio Sardi, Lazio' },
              { name: 'Uova Fresche', details: 'Da galline allevate a terra, selezionate per il tuorlo intenso.', source: 'Azienda Agricola Verdi' },
              { name: 'Pepe Nero', details: 'Macinato fresco al momento, proveniente da coltivazioni biologiche.', source: 'Spezieria Storica, Roma' }
            ],
            pairings: [
              { name: 'Frascati Superiore', icon: 'fas fa-wine-glass', details: 'Bianco fresco con buona struttura per contrastare la cremosit√†.' },
              { name: 'Cerasuolo d\'Abruzzo', icon: 'fas fa-wine-glass', details: 'Rosato con acidit√† vivace e note fruttate.' },
              { name: 'Acqua Tonica', icon: 'fas fa-glass-water', details: 'Con scorza di limone per pulire il palato.' }
            ],
            customization: [
              { name: 'Extra Pepe', price: 'Su richiesta', icon: 'fas fa-pepper-hot' },
              { name: 'Guanciale Croccante', price: '+‚Ç¨1,00', icon: 'fas fa-bacon' },
              { name: 'Formaggio Extra', price: '+‚Ç¨2,00', icon: 'fas fa-cheese' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1612874742237-6526221588e3?w=600', caption: 'Carbonara perfetta' },
              { src: 'https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=600', caption: 'Guanciale croccante' },
              { src: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=600', caption: 'Pecorino romano' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1612874742237-6526221588e3?w=600" alt="Carbonara" class="dish-image">
              <span class="dish-badge">CLASSICO</span>
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Carbonara Originale</h3>
                <span class="dish-price">‚Ç¨14</span>
              </div>
              <p class="dish-desc">Guanciale croccante, pecorino romano DOP, tuorlo d'uovo, pepe nero.</p>
              <div class="dish-tags">
                <span class="tag best">‚≠ê Top</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'primo2',
            name: 'Amatriciana',
            price: '‚Ç¨13,00',
            description: 'Guanciale, pomodoro San Marzano, pecorino, peperoncino. Un piatto semplice ma ricco di sapore, che racconta la tradizione italiana.',
            image: 'https://images.unsplash.com/photo-1563379926898-0c8a8c7e5c8e?w=1200',
            tags: ['spicy'],
            story: 'L\'Amatriciana nasce ad Amatrice, in provincia di Rieti. La nostra versione utilizza pomodoro San Marzano DOP, guanciale stagionato e peperoncino coltivato nei nostri orti.',
            ingredients: [
              { name: 'Guanciale', details: 'Tagliato a mano e stagionato 30 giorni per una croccantezza perfetta.', source: 'Salumificio Romano' },
              { name: 'Pomodoro San Marzano', details: 'Variet√† DOP coltivata in terreni vulcanici.', source: 'Azienda Agricola Verde, Campania' },
              { name: 'Pecorino Romano DOP', details: 'Stagionato 8 mesi, grattugiato al momento.', source: 'Caseificio Sardi, Lazio' },
              { name: 'Peperoncino', details: 'Coltivato nei nostri orti, essiccato al sole e macinato fresco.', source: 'Orto del Ristorante' }
            ],
            pairings: [
              { name: 'Montepulciano d\'Abruzzo', icon: 'fas fa-wine-glass', details: 'Rosso corposo con tannini morbidi.' },
              { name: 'Cerasuolo d\'Abruzzo', icon: 'fas fa-wine-glass', details: 'Rosato con acidit√† vivace e note fruttate.' },
              { name: 'Birra Rossa', icon: 'fas fa-beer', details: 'Con note maltate che esaltano il pomodoro.' }
            ],
            customization: [
              { name: 'Piccante Extra', price: '+‚Ç¨0,50', icon: 'fas fa-pepper-hot' },
              { name: 'Extra Guanciale', price: '+‚Ç¨1,50', icon: 'fas fa-bacon' },
              { name: 'Formaggio Extra', price: '+‚Ç¨2,00', icon: 'fas fa-cheese' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1563379926898-0c8a8c7e5c8e?w=600', caption: 'Amatriciana perfetta' },
              { src: 'https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600', caption: 'Guanciale croccante' },
              { src: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=600', caption: 'Pomodoro San Marzano' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1563379926898-0c8a8c7e5c8e?w=600" alt="Amatriciana" class="dish-image">
              <span class="dish-badge">PICCANTE</span>
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Amatriciana</h3>
                <span class="dish-price">‚Ç¨13</span>
              </div>
              <p class="dish-desc">Guanciale, pomodoro San Marzano, pecorino, peperoncino.</p>
              <div class="dish-tags">
                <span class="tag spicy">üå∂Ô∏è Piccante</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'primo3',
            name: 'Cacio e Pepe',
            price: '‚Ç¨12,00',
            description: 'Pecorino romano stagionato, pepe nero tostato, mantecatura perfetta. La semplicit√† diventa arte culinaria.',
            image: 'https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=1200',
            tags: ['veg'],
            story: 'Il Cacio e Pepe √® un piatto povero della tradizione romana. Noi lo prepariamo con pecorino romano DOP stagionato 12 mesi e pepe nero macinato fresco, per una mantecatura perfetta senza aggiunta di uova.',
            ingredients: [
              { name: 'Pecorino Romano DOP', details: 'Stagionato 12 mesi, grattugiato al momento per una cremosit√† unica.', source: 'Caseificio Sardi, Lazio' },
              { name: 'Pepe Nero', details: 'Tostato e macinato fresco al momento per esaltare gli oli essenziali.', source: 'Spezieria Storica, Roma' },
              { name: 'Pasta Fresca', details: 'Fatta in casa con semola di grano duro macinata a pietra.', source: 'Pastificio Artigianale' },
              { name: 'Acqua della Pasta', details: 'Utilizzata per la mantecatura perfetta senza aggiunta di grassi.', source: 'Acqua Minerale' }
            ],
            pairings: [
              { name: 'Frascati Superiore', icon: 'fas fa-wine-glass', details: 'Bianco fresco con buona struttura per contrastare la sapidit√†.' },
              { name: 'Est! Est!! Est!!! di Bagnoregio', icon: 'fas fa-wine-glass', details: 'Bianco laziale con acidit√† vivace.' },
              { name: 'Acqua Minerale', icon: 'fas fa-glass-water', details: 'Con una fetta di limone per pulire il palato.' }
            ],
            customization: [
              { name: 'Extra Pepe', price: 'Su richiesta', icon: 'fas fa-pepper-hot' },
              { name: 'Pepe Rosa', price: '+‚Ç¨1,00', icon: 'fas fa-pepper-hot' },
              { name: 'Formaggio Extra', price: '+‚Ç¨2,00', icon: 'fas fa-cheese' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=600', caption: 'Cacio e Pepe perfetto' },
              { src: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=600', caption: 'Pecorino romano' },
              { src: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=600', caption: 'Mantecatura perfetta' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=600" alt="Cacio e Pepe" class="dish-image">
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Cacio e Pepe</h3>
                <span class="dish-price">‚Ç¨12</span>
              </div>
              <p class="dish-desc">Pecorino romano stagionato, pepe nero tostato, mantecatura perfetta.</p>
              <div class="dish-tags">
                <span class="tag veg">ü•ó Veg</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'primo4',
            name: 'Lasagna della Nonna',
            price: '‚Ç¨15,00',
            description: 'Pasta fresca, rag√π cotto 6 ore, besciamella fatta in casa, parmigiano. La ricetta che ha fatto innamorare generazioni.',
            image: 'https://images.unsplash.com/photo-1574868233972-1d073248a8f3?w=1200',
            tags: ['best'],
            story: 'La nostra Lasagna √® la ricetta segreta della nonna Maria, tramandata di generazione in generazione. Il rag√π cuoce per 6 ore, la pasta √® fresca ogni giorno e la besciamella √® fatta con latte intero e burro.',
            ingredients: [
              { name: 'Pasta Fresca', details: 'Laminata a mano ogni mattina con uova fresche e semola di grano duro.', source: 'Pastificio Artigianale' },
              { name: 'Rag√π di Manzo', details: 'Cotto lentamente per 6 ore con carni selezionate e vino rosso.', source: 'Azienda Agricola Rossi' },
              { name: 'Besciamella', details: 'Fatta in casa con latte intero, burro e farina, senza conservanti.', source: 'Ricetta della Nonna' },
              { name: 'Parmigiano Reggiano', details: '24 mesi di stagionatura, grattugiato al momento.', source: 'Caseificio Ferrari, Emilia' }
            ],
            pairings: [
              { name: 'Barbera d\'Alba', icon: 'fas fa-wine-glass', details: 'Rosso corposo con acidit√† vivace per contrastare la ricchezza.' },
              { name: 'Nero d\'Avola', icon: 'fas fa-wine-glass', details: 'Siciliano con buona struttura e note fruttate.' },
              { name: 'Birra Ambrata', icon: 'fas fa-beer', details: 'Con note maltate che esaltano il rag√π.' }
            ],
            customization: [
              { name: 'Extra Rag√π', price: '+‚Ç¨2,00', icon: 'fas fa-drumstick-bite' },
              { name: 'Extra Formaggio', price: '+‚Ç¨2,00', icon: 'fas fa-cheese' },
              { name: 'Versione Vegetariana', price: '+‚Ç¨1,00', icon: 'fas fa-leaf' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1574868233972-1d073248a8f3?w=600', caption: 'Lasagna perfetta' },
              { src: 'https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600', caption: 'Rag√π artigianale' },
              { src: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=600', caption: 'Formaggio grattugiato' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1574868233972-1d073248a8f3?w=600" alt="Lasagna" class="dish-image">
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Lasagna della Nonna</h3>
                <span class="dish-price">‚Ç¨15</span>
              </div>
              <p class="dish-desc">Pasta fresca, rag√π cotto 6 ore, besciamella fatta in casa, parmigiano.</p>
              <div class="dish-tags">
                <span class="tag best">‚≠ê Top</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Pizze -->
        <h2 class="category-title" id="category-pizze">
          <i class="fas fa-pizza-slice"></i> Le Nostre Pizze
        </h2>
        <div class="dishes-grid" id="pizze-grid">
          <div class="dish-card" onclick="openDishModal({
            id: 'pizza1',
            name: 'Margherita DOP',
            price: '‚Ç¨9,00',
            description: 'Pomodoro San Marzano, mozzarella fior di latte, basilico fresco, olio EVO. La pizza per eccellenza, semplice e perfetta.',
            image: 'https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=1200',
            tags: ['veg', 'best'],
            story: 'La Margherita √® nata nel 1889 in onore della regina Margherita di Savoia. Noi la prepariamo con pomodoro San Marzano DOP, mozzarella fior di latte di Agerola e basilico fresco del nostro giardino.',
            ingredients: [
              { name: 'Pomodoro San Marzano', details: 'Variet√† DOP coltivata in terreni vulcanici.', source: 'Azienda Agricola Verde, Campania' },
              { name: 'Mozzarella Fior di Latte', details: 'Prodotto con latte vaccino fresco, lavorato a mano.', source: 'Caseificio Agerola, Campania' },
              { name: 'Basilico Genovese', details: 'Foglie selezionate a mano, raccolte al mattino.', source: 'Giardino del Ristorante' },
              { name: 'Olio EVO', details: 'Fruttato leggero, ottenuto da olive taggiasche.', source: 'Frantoio Bertolli, Liguria' }
            ],
            pairings: [
              { name: 'Aglianico del Vulture', icon: 'fas fa-wine-glass', details: 'Rosso campano con buona struttura e acidit√† equilibrata.' },
              { name: 'Falanghina', icon: 'fas fa-wine-glass', details: 'Bianco campano fresco con note agrumate.' },
              { name: 'Limonata Artigianale', icon: 'fas fa-glass-water', details: 'Con foglie di basilico fresco.' }
            ],
            customization: [
              { name: 'Extra Mozzarella', price: '+‚Ç¨1,50', icon: 'fas fa-cheese' },
              { name: 'Olive Taggiasche', price: '+‚Ç¨1,00', icon: 'fas fa-olive' },
              { name: 'Acciughe', price: '+‚Ç¨2,00', icon: 'fas fa-fish' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=600', caption: 'Margherita perfetta' },
              { src: 'https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600', caption: 'Mozzarella fresca' },
              { src: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=600', caption: 'Pomodoro San Marzano' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=600" alt="Margherita" class="dish-image">
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Margherita DOP</h3>
                <span class="dish-price">‚Ç¨9</span>
              </div>
              <p class="dish-desc">Pomodoro San Marzano, mozzarella fior di latte, basilico fresco, olio EVO.</p>
              <div class="dish-tags">
                <span class="tag veg">ü•ó Veg</span>
                <span class="tag best">‚≠ê Classica</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'pizza2',
            name: 'Diavola',
            price: '‚Ç¨11,00',
            description: 'Pomodoro, mozzarella, salame piccante, peperoncino fresco, origano. Per chi ama i sapori decisi e intensi.',
            image: 'https://images.unsplash.com/photo-1628840042765-356cda07504e?w=1200',
            tags: ['spicy'],
            story: 'La Diavola √® nata negli anni \'80 come variante piccante della Margherita. Noi la prepariamo con salame piccante artigianale, peperoncino fresco coltivato nei nostri orti e pomodoro San Marzano DOP.',
            ingredients: [
              { name: 'Pomodoro San Marzano', details: 'Variet√† DOP coltivata in terreni vulcanici.', source: 'Azienda Agricola Verde, Campania' },
              { name: 'Mozzarella Fior di Latte', details: 'Prodotto con latte vaccino fresco, lavorato a mano.', source: 'Caseificio Agerola, Campania' },
              { name: 'Salame Piccante', details: 'Con peperoncino fresco e vino rosso, stagionato 6 mesi.', source: 'Salumificio Rossi, Calabria' },
              { name: 'Peperoncino Fresco', details: 'Variet√† calabrese coltivata nei nostri orti durante la stagione.', source: 'Orto del Ristorante' }
            ],
            pairings: [
              { name: 'Nero d\'Avola', icon: 'fas fa-wine-glass', details: 'Siciliano corposo con buona acidit√† per contrastare il piccante.' },
              { name: 'Aglianico del Vulture', icon: 'fas fa-wine-glass', details: 'Rosso campano con tannini morbidi.' },
              { name: 'Birra Piccante', icon: 'fas fa-beer', details: 'Con note di peperoncino per un abbinamento audace.' }
            ],
            customization: [
              { name: 'Piccante Extra', price: '+‚Ç¨0,50', icon: 'fas fa-pepper-hot' },
              { name: 'Extra Salame', price: '+‚Ç¨1,50', icon: 'fas fa-bacon' },
              { name: 'Olive Nere', price: '+‚Ç¨1,00', icon: 'fas fa-olive' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1628840042765-356cda07504e?w=600', caption: 'Diavola perfetta' },
              { src: 'https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600', caption: 'Salame piccante' },
              { src: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=600', caption: 'Peperoncino fresco' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1628840042765-356cda07504e?w=600" alt="Diavola" class="dish-image">
              <span class="dish-badge">PICCANTE</span>
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Diavola</h3>
                <span class="dish-price">‚Ç¨11</span>
              </div>
              <p class="dish-desc">Pomodoro, mozzarella, salame piccante, peperoncino fresco, origano.</p>
              <div class="dish-tags">
                <span class="tag spicy">üå∂Ô∏è Piccante</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'pizza3',
            name: 'Ortolana',
            price: '‚Ç¨12,00',
            description: 'Verdure grigliate di stagione, mozzarella, olive taggiasche, olio al tartufo. Freschezza e leggerezza in ogni morso.',
            image: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=1200',
            tags: ['veg'],
            story: 'L\'Ortolana √® la nostra interpretazione moderna della pizza vegetariana. Utilizziamo verdure di stagione, grigliate al momento e condite con olio al tartufo bianco, per un piatto fresco e leggero.',
            ingredients: [
              { name: 'Mozzarella Fior di Latte', details: 'Prodotto con latte vaccino fresco, lavorato a mano.', source: 'Caseificio Agerola, Campania' },
              { name: 'Verdure di Stagione', details: 'Melanzane, zucchine, peperoni e pomodori grigliati al momento.', source: 'Orto Biologico, Toscana' },
              { name: 'Olive Taggiasche', details: 'Lavorate a mano per creare una crema morbida e saporita.', source: 'Frantoio Liguria' },
              { name: 'Olio al Tartufo', details: 'Olio EVO infuso con tartufo bianco della nostra zona.', source: 'Cacciatore di Tartufi, Toscana' }
            ],
            pairings: [
              { name: 'Vermentino', icon: 'fas fa-wine-glass', details: 'Bianco fresco con note agrumate che esaltano le verdure.' },
              { name: 'Cerasuolo d\'Abruzzo', icon: 'fas fa-wine-glass', details: 'Rosato con acidit√† vivace e note fruttate.' },
              { name: 'Acqua Tonica', icon: 'fas fa-glass-water', details: 'Con foglie di basilico fresco.' }
            ],
            customization: [
              { name: 'Extra Verdure', price: '+‚Ç¨1,50', icon: 'fas fa-seedling' },
              { name: 'Formaggio Extra', price: '+‚Ç¨2,00', icon: 'fas fa-cheese' },
              { name: 'Tartufo Fresco', price: '+‚Ç¨3,00', icon: 'fas fa-truffle' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=600', caption: 'Ortolana perfetta' },
              { src: 'https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600', caption: 'Verdure grigliate' },
              { src: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=600', caption: 'Olio al tartufo' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=600" alt="Ortolana" class="dish-image">
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Ortolana</h3>
                <span class="dish-price">‚Ç¨12</span>
              </div>
              <p class="dish-desc">Verdure grigliate di stagione, mozzarella, olive taggiasche, olio al tartufo.</p>
              <div class="dish-tags">
                <span class="tag veg">ü•ó Veg</span>
              </div>
            </div>
          </div>
          
          <div class="dish-card" onclick="openDishModal({
            id: 'pizza4',
            name: 'Quattro Formaggi',
            price: '‚Ç¨13,00',
            description: 'Mozzarella, gorgonzola, fontina, parmigiano, noci caramellate. L\'equilibrio perfetto tra sapori e consistenze.',
            image: 'https://images.unsplash.com/photo-1593560708920-61dd98c46a4e?w=1200',
            tags: ['veg', 'best'],
            story: 'La Quattro Formaggi √® nata negli anni \'60 come variante gourmet della Margherita. Noi utilizziamo una selezione di formaggi artigianali che rappresentano le diverse regioni d\'Italia, per un equilibrio perfetto tra sapori e consistenze.',
            ingredients: [
              { name: 'Mozzarella Fior di Latte', details: 'Prodotto con latte vaccino fresco, lavorato a mano.', source: 'Caseificio Agerola, Campania' },
              { name: 'Gorgonzola Dolce', details: 'Stagionato 75 giorni, con venature blu ben definite.', source: 'Caseificio Lombardo, Lombardia' },
              { name: 'Fontina DOP', details: 'Prodotto in Valle d\'Aosta con latte crudo di alta montagna.', source: 'Caseificio Alpino, Valle d\'Aosta' },
              { name: 'Parmigiano Reggiano', details: '24 mesi di stagionatura, grattugiato al momento.', source: 'Caseificio Ferrari, Emilia' }
            ],
            pairings: [
              { name: 'Barbera d\'Alba', icon: 'fas fa-wine-glass', details: 'Rosso con acidit√† vivace per contrastare la cremosit√†.' },
              { name: 'Malvasia delle Lipari', icon: 'fas fa-wine-glass', details: 'Bianco dolce con note aromatiche che esaltano i formaggi.' },
              { name: 'Birra Belga', icon: 'fas fa-beer', details: 'Con note caramellate che si abbinano ai formaggi.' }
            ],
            customization: [
              { name: 'Extra Formaggio', price: '+‚Ç¨2,00', icon: 'fas fa-cheese' },
              { name: 'Noci Caramellate', price: '+‚Ç¨1,50', icon: 'fas fa-seedling' },
              { name: 'Miele di Castagno', price: '+‚Ç¨1,00', icon: 'fas fa-jam' }
            ],
            gallery: [
              { src: 'https://images.unsplash.com/photo-1593560708920-61dd98c46a4e?w=600', caption: 'Quattro Formaggi perfetta' },
              { src: 'https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=600', caption: 'Formaggi selezionati' },
              { src: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=600', caption: 'Mozzarella fresca' }
            ]
          })">
            <div class="dish-image-container">
              <img src="https://images.unsplash.com/photo-1593560708920-61dd98c46a4e?w=600" alt="Quattro Formaggi" class="dish-image">
            </div>
            <div class="dish-content">
              <div class="dish-header">
                <h3 class="dish-name">Quattro Formaggi</h3>
                <span class="dish-price">‚Ç¨13</span>
              </div>
              <p class="dish-desc">Mozzarella, gorgonzola, fontina, parmigiano, noci caramellate.</p>
              <div class="dish-tags">
                <span class="tag veg">ü•ó Veg</span>
                <span class="tag best">‚≠ê Top</span>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Modal dettaglio piatto -->
    <div class="modal" id="dishModal">
      <div class="modal-close" onclick="closeModal()">
        <i class="fas fa-times"></i>
      </div>
      <div class="modal-content">
        <div class="modal-image-container">
          <img src="" alt="" class="modal-image" id="modalImage">
        </div>
        <h2 class="modal-title" id="modalTitle">Dettagli Piatto</h2>
        <div class="modal-price" id="modalPrice">‚Ç¨0,00</div>
        <p class="modal-description" id="modalDescription">
          Seleziona un piatto per visualizzare i dettagli completi.
        </p>
        
        <!-- Sezione Storia e Origini -->
        <div class="story-section">
          <h3 class="story-title"><i class="fas fa-book-open"></i> Storia e Origini</h3>
          <p class="story-content" id="modalStory">
            Questa sezione racconta la storia del piatto, le sue origini e come lo prepariamo nel nostro ristorante.
          </p>
        </div>
        
        <!-- Sezione Ingredienti di Qualit√† -->
        <div class="ingredients-section">
          <h3 class="ingredients-title"><i class="fas fa-leaf"></i> Ingredienti di Qualit√†</h3>
          <ul class="ingredients-list" id="modalIngredients">
            <!-- Ingredienti verranno inseriti dinamicamente -->
          </ul>
        </div>
        
        <!-- Sezione Abbinamenti -->
        <div class="pairing-section">
          <h3 class="pairing-title"><i class="fas fa-wine-glass"></i> Abbinamenti Consigliati</h3>
          <div class="pairing-grid" id="modalPairings">
            <!-- Abbinamenti verranno inseriti dinamicamente -->
          </div>
        </div>
        
        <!-- Sezione Personalizzazione -->
        <div class="customization-section">
          <h3 class="customization-title"><i class="fas fa-sliders-h"></i> Personalizza il Tuo Piatto</h3>
          <div class="customization-options" id="modalCustomization">
            <!-- Opzioni di personalizzazione verranno inserite dinamicamente -->
          </div>
        </div>
        
        <!-- Sezione Galleria -->
        <div class="gallery-section">
          <h3 class="gallery-title"><i class="fas fa-images"></i> Galleria Fotografica</h3>
          <div class="gallery-grid" id="modalGallery">
            <!-- Immagini della galleria verranno inserite dinamicamente -->
          </div>
        </div>
        
        <!-- Sezione Il Nostro Approccio -->
        <div class="approach-section">
          <h3 class="approach-title"><i class="fas fa-hands-helping"></i> Il Nostro Approccio</h3>
          <p class="approach-content">
            In <strong>Essenza</strong>, ogni piatto √® il risultato di una ricerca costante per valorizzare i prodotti del territorio e rispettare la tradizione.
          </p>
          <div class="approach-highlights">
            <div class="highlight-item">
              <i class="fas fa-seedling highlight-icon"></i>
              <p class="highlight-text">Ingredienti stagionali e locali, selezionati direttamente dai produttori</p>
            </div>
            <div class="highlight-item">
              <i class="fas fa-hands highlight-icon"></i>
              <p class="highlight-text">Preparazione artigianale, senza l'uso di additivi o preparati industriali</p>
            </div>
            <div class="highlight-item">
              <i class="fas fa-recycle highlight-icon"></i>
              <p class="highlight-text">Impegno nella riduzione degli sprechi e nel riciclo responsabile</p>
            </div>
            <div class="highlight-item">
              <i class="fas fa-heart highlight-icon"></i>
              <p class="highlight-text">Passione e cura in ogni dettaglio, per offrire un'esperienza indimenticabile</p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script>
    // --- STATO DELL'APPLICAZIONE ---
    const appState = {
      activeCategory: 'all',
      searchQuery: '',
      currentPromoIndex: 0,
      touchStartX: 0,
      touchStartY: 0,
      lastTouchTime: 0,
      promoItemWidth: 0,
      promoGap: 20,
      isDragging: false
    };

    // --- ELEMENTI DEL DOM ---
    const elements = {
      parallaxBg: null,
      searchInput: null,
      voiceSearch: null,
      categoriesNav: null,
      promoTrack: null,
      carouselDots: null,
      dishModal: null,
      modalImage: null,
      modalTitle: null,
      modalPrice: null,
      modalDescription: null,
      modalStory: null,
      modalIngredients: null,
      modalPairings: null,
      modalCustomization: null,
      modalGallery: null
    };

    // --- FUNZIONI DI UTILIT√Ä ---
    // Ottiene la trasformazione X corrente di un elemento
    function getTranslateX(element) {
      if (!element) return 0;
      
      const style = window.getComputedStyle(element);
      const matrix = style.transform;
      
      if (matrix === 'none') return 0;
      
      try {
        const values = matrix.match(/matrix.*\((.+)\)/)[1].split(', ');
        return parseFloat(values[4]);
      } catch (e) {
        console.error('Errore nel parsing della trasformazione:', e);
        return 0;
      }
    }

    // Calcola le dimensioni del carosello
    function updatePromoDimensions() {
      if (!elements.promoTrack) return;
      
      const containerWidth = elements.promoTrack.parentElement.clientWidth;
      const itemWidth = containerWidth * 0.9;
      
      appState.promoItemWidth = itemWidth;
      appState.promoGap = 20;
    }

    // --- FUNZIONI PRINCIPALI ---
    // Inizializzazione dell'app
    function initApp() {
      try {
        // Inizializza gli elementi del DOM
        initDOMElements();
        
        // Imposta i listeners
        setupEventListeners();
        
        // Inizializza gli effetti
        initParallaxEffect();
        initSearch();
        initVoiceSearch();
        
        // Inizializza il carosello
        initPromoCarousel();
        
        // Aggiorna l'UI
        updateUI();
        
        // Calcola le dimensioni iniziali
        setTimeout(() => {
          updatePromoDimensions();
          animateToIndex(0);
        }, 100);
      } catch (error) {
        console.error('Errore durante l\'inizializzazione:', error);
      }
    }

    // Inizializza gli elementi del DOM
    function initDOMElements() {
      elements.parallaxBg = document.getElementById('parallaxBg');
      elements.searchInput = document.getElementById('searchInput');
      elements.voiceSearch = document.getElementById('voiceSearch');
      elements.categoriesNav = document.getElementById('categoriesNav');
      elements.promoTrack = document.getElementById('promoTrack');
      elements.carouselDots = document.getElementById('carouselDots');
      elements.dishModal = document.getElementById('dishModal');
      elements.modalImage = document.getElementById('modalImage');
      elements.modalTitle = document.getElementById('modalTitle');
      elements.modalPrice = document.getElementById('modalPrice');
      elements.modalDescription = document.getElementById('modalDescription');
      elements.modalStory = document.getElementById('modalStory');
      elements.modalIngredients = document.getElementById('modalIngredients');
      elements.modalPairings = document.getElementById('modalPairings');
      elements.modalCustomization = document.getElementById('modalCustomization');
      elements.modalGallery = document.getElementById('modalGallery');
    }

    // Imposta tutti gli event listeners
    function setupEventListeners() {
      // Navigazione tra categorie
      document.querySelectorAll('.category').forEach(category => {
        category.addEventListener('click', () => {
          setActiveCategory(category.dataset.category);
        });
      });

      // Ricerca
      if (elements.searchInput) {
        elements.searchInput.addEventListener('input', handleSearch);
      }
      
      // Voice search
      if (elements.voiceSearch) {
        elements.voiceSearch.addEventListener('click', startVoiceSearch);
      }
    }

    // Inizializza l'effetto parallasse avanzato
    function initParallaxEffect() {
      if (!elements.parallaxBg) return;
      
      document.addEventListener('mousemove', (e) => {
        if (window.innerWidth < 768) return; // Disabilita su mobile
        
        const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
        const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
        
        elements.parallaxBg.style.transform = `scale(1.05) translateX(${xAxis}px) translateY(${yAxis}px)`;
      });

      document.addEventListener('mouseleave', () => {
        elements.parallaxBg.style.transform = 'scale(1.05)';
      });
    }

    // Inizializza la ricerca avanzata
    function initSearch() {
      if (!elements.searchInput) return;
      
      let debounceTimer;
      
      elements.searchInput.addEventListener('input', () => {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => {
          appState.searchQuery = elements.searchInput.value.trim().toLowerCase();
          filterDishes();
        }, 300);
      });
    }

    // Inizializza la ricerca vocale (simulazione)
    function initVoiceSearch() {
      if (!elements.voiceSearch) return;
      
      elements.voiceSearch.addEventListener('click', () => {
        elements.voiceSearch.style.color = '#4CAF50';
        elements.voiceSearch.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i>';
        
        setTimeout(() => {
          elements.voiceSearch.style.color = '#8C6D43';
          elements.voiceSearch.innerHTML = '<i class="fas fa-microphone"></i>';
          
          // Simula il risultato della ricerca vocale
          elements.searchInput.value = "pomodoro";
          appState.searchQuery = "pomodoro";
          filterDishes();
        }, 2000);
      });
    }

    // Inizializza il carousel promozioni
    function initPromoCarousel() {
      if (!elements.promoTrack || !elements.carouselDots) return;
      
      // Gestione ridimensionamento finestra
      window.addEventListener('resize', () => {
        updatePromoDimensions();
        animateToIndex(appState.currentPromoIndex);
      });
      
      // Gestione touch
      let startX = 0;
      let startScrollLeft = 0;
      
      // Gestione touch start
      elements.promoTrack.addEventListener('touchstart', (e) => {
        appState.isDragging = true;
        startX = e.touches[0].clientX;
        startScrollLeft = getTranslateX(elements.promoTrack);
        elements.promoTrack.style.transition = 'none';
        appState.lastTouchTime = Date.now();
      });
      
      // Gestione touch move
      elements.promoTrack.addEventListener('touchmove', (e) => {
        if (!appState.isDragging) return;
        e.preventDefault();
        
        const currentX = e.touches[0].clientX;
        const diff = currentX - startX;
        const newTranslate = startScrollLeft + diff;
        
        elements.promoTrack.style.transform = `translateX(${newTranslate}px)`;
        appState.lastTouchTime = Date.now();
      });
      
      // Gestione touch end
      elements.promoTrack.addEventListener('touchend', () => {
        if (!appState.isDragging) return;
        appState.isDragging = false;
        
        // Calcola la velocit√† del gesto
        const timeDiff = Date.now() - appState.lastTouchTime;
        const currentX = getTranslateX(elements.promoTrack);
        let newIndex = appState.currentPromoIndex;
        
        // Se il gesto √® veloce, considera lo swipe
        if (timeDiff < 300) {
          const diff = startX - event.changedTouches[0].clientX;
          if (Math.abs(diff) > 50) {
            newIndex = diff > 0 ? 
              Math.min(newIndex + 1, elements.promoTrack.children.length - 1) : 
              Math.max(newIndex - 1, 0);
          }
        } else {
          // Altrimenti, calcola l'indice pi√π vicino
          const containerWidth = elements.promoTrack.parentElement.clientWidth;
          const totalWidth = elements.promoTrack.scrollWidth;
          const maxTranslate = -(totalWidth - containerWidth);
          
          if (maxTranslate === 0) return;
          
          // Calcola la posizione percentuale
          const position = currentX / maxTranslate;
          
          // Calcola l'indice pi√π vicino
          newIndex = Math.round(position * (elements.promoTrack.children.length - 1));
        }
        
        // Assicura che l'indice sia valido
        newIndex = Math.max(0, Math.min(newIndex, elements.promoTrack.children.length - 1));
        
        // Anima al nuovo indice
        animateToIndex(newIndex);
      });
      
      // Gestione mouse per desktop
      elements.promoTrack.addEventListener('mousedown', (e) => {
        appState.isDragging = true;
        startX = e.clientX;
        startScrollLeft = getTranslateX(elements.promoTrack);
        elements.promoTrack.style.transition = 'none';
        appState.lastTouchTime = Date.now();
      });
      
      elements.promoTrack.addEventListener('mousemove', (e) => {
        if (!appState.isDragging) return;
        e.preventDefault();
        
        const currentX = e.clientX;
        const diff = currentX - startX;
        const newTranslate = startScrollLeft + diff;
        
        elements.promoTrack.style.transform = `translateX(${newTranslate}px)`;
        appState.lastTouchTime = Date.now();
      });
      
      document.addEventListener('mouseup', () => {
        if (!appState.isDragging) return;
        appState.isDragging = false;
        
        // Calcola la velocit√† del gesto
        const timeDiff = Date.now() - appState.lastTouchTime;
        const currentX = getTranslateX(elements.promoTrack);
        let newIndex = appState.currentPromoIndex;
        
        // Se il gesto √® veloce, considera lo swipe
        if (timeDiff < 300) {
          const diff = startX - event.clientX;
          if (Math.abs(diff) > 50) {
            newIndex = diff > 0 ? 
              Math.min(newIndex + 1, elements.promoTrack.children.length - 1) : 
              Math.max(newIndex - 1, 0);
          }
        } else {
          // Altrimenti, calcola l'indice pi√π vicino
          const containerWidth = elements.promoTrack.parentElement.clientWidth;
          const totalWidth = elements.promoTrack.scrollWidth;
          const maxTranslate = -(totalWidth - containerWidth);
          
          if (maxTranslate === 0) return;
          
          // Calcola la posizione percentuale
          const position = currentX / maxTranslate;
          
          // Calcola l'indice pi√π vicino
          newIndex = Math.round(position * (elements.promoTrack.children.length - 1));
        }
        
        // Assicura che l'indice sia valido
        newIndex = Math.max(0, Math.min(newIndex, elements.promoTrack.children.length - 1));
        
        // Anima al nuovo indice
        animateToIndex(newIndex);
      });
      
      // Click sui punti del carousel
      document.querySelectorAll('.carousel-dot').forEach((dot, index) => {
        dot.addEventListener('click', () => {
          animateToIndex(index);
        });
      });
    }

    // Anima al nuovo indice del carousel
    function animateToIndex(index) {
      if (!elements.promoTrack) return;
      
      // Calcola la nuova posizione
      const translateX = -((appState.promoItemWidth + appState.promoGap) * index);
      
      // Applica l'animazione
      elements.promoTrack.style.transition = 'transform 0.5s ease';
      elements.promoTrack.style.transform = `translateX(${translateX}px)`;
      
      // Aggiorna i punti
      document.querySelectorAll('.carousel-dot').forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
      
      // Aggiorna lo stato
      appState.currentPromoIndex = index;
    }

    // Imposta la categoria attiva
    function setActiveCategory(category) {
      appState.activeCategory = category;
      updateUI();
      
      // Scrolla in cima
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Aggiorna l'interfaccia utente
    function updateUI() {
      // Aggiorna le categorie attive
      document.querySelectorAll('.category').forEach(category => {
        category.classList.toggle('active', category.dataset.category === appState.activeCategory);
      });
      
      // Mostra/nascondi categorie in base alla categoria attiva
      document.querySelectorAll('.dishes-grid').forEach(grid => {
        const categoryId = grid.id.replace('-grid', '');
        if (appState.activeCategory === 'all' || appState.activeCategory === categoryId) {
          grid.style.display = 'grid';
        } else {
          grid.style.display = 'none';
        }
      });
    }

    // Filtra i piatti in base alla ricerca
    function filterDishes() {
      const query = appState.searchQuery;
      
      if (!query) {
        // Mostra tutte le categorie
        document.querySelectorAll('.category').forEach(category => {
          category.classList.toggle('active', category.dataset.category === 'all');
        });
        
        appState.activeCategory = 'all';
        updateUI();
        return;
      }
      
      // Cerca nei piatti
      let found = false;
      const categories = ['antipasti', 'primi', 'pizze', 'secondi', 'dolci', 'bevande'];
      
      for (const category of categories) {
        const grid = document.getElementById(`${category}-grid`);
        if (!grid) continue;
        
        const dishes = grid.querySelectorAll('.dish-card');
        let categoryFound = false;
        
        dishes.forEach(dish => {
          const text = dish.textContent.toLowerCase();
          if (text.includes(query)) {
            dish.style.display = 'flex';
            categoryFound = true;
            found = true;
          } else {
            dish.style.display = 'none';
          }
        });
        
        // Mostra/nascondi la categoria in base ai risultati
        if (categoryFound) {
          const categoryTitle = document.getElementById(`category-${category}`);
          if (categoryTitle) categoryTitle.style.display = 'flex';
          grid.style.display = 'grid';
        } else {
          const categoryTitle = document.getElementById(`category-${category}`);
          if (categoryTitle) categoryTitle.style.display = 'none';
          grid.style.display = 'none';
        }
      }
      
      // Mostra messaggio se nessun risultato
      const noResults = document.getElementById('noResults');
      if (!found && query) {
        if (!noResults) {
          const container = document.querySelector('.menu-container');
          const noResultsDiv = document.createElement('div');
          noResultsDiv.id = 'noResults';
          noResultsDiv.className = 'no-results';
          noResultsDiv.innerHTML = `
            <i class="fas fa-search"></i>
            <h3>Nessun risultato per "${query}"</h3>
            <div>Prova con altri termini di ricerca</div>
          `;
          container.appendChild(noResultsDiv);
        }
      } else if (noResults) {
        noResults.remove();
      }
    }

    // Apre il modal con i dettagli del piatto
    function openDishModal(dish) {
      // Aggiorna il modal con i dati del piatto
      if (elements.modalImage) elements.modalImage.src = dish.image;
      if (elements.modalTitle) elements.modalTitle.textContent = dish.name;
      if (elements.modalPrice) elements.modalPrice.textContent = dish.price;
      if (elements.modalDescription) elements.modalDescription.textContent = dish.description;
      
      // Sezione Storia
      if (elements.modalStory) elements.modalStory.textContent = dish.story;
      
      // Sezione Ingredienti
      if (elements.modalIngredients) {
        elements.modalIngredients.innerHTML = '';
        dish.ingredients.forEach(ingredient => {
          const li = document.createElement('li');
          li.className = 'ingredient-item';
          li.innerHTML = `
            <i class="fas fa-check-circle ingredient-icon"></i>
            <div>
              <div class="ingredient-name">${ingredient.name}</div>
              <div class="ingredient-details">${ingredient.details}</div>
              <span class="ingredient-source">${ingredient.source}</span>
            </div>
          `;
          elements.modalIngredients.appendChild(li);
        });
      }
      
      // Sezione Abbinamenti
      if (elements.modalPairings) {
        elements.modalPairings.innerHTML = '';
        dish.pairings.forEach(pairing => {
          const div = document.createElement('div');
          div.className = 'pairing-card';
          div.innerHTML = `
            <i class="${pairing.icon} pairing-icon"></i>
            <div class="pairing-name">${pairing.name}</div>
            <div class="pairing-desc">${pairing.details}</div>
          `;
          elements.modalPairings.appendChild(div);
        });
      }
      
      // Sezione Personalizzazione
      if (elements.modalCustomization) {
        elements.modalCustomization.innerHTML = '';
        dish.customization.forEach(option => {
          const div = document.createElement('div');
          div.className = 'option-item';
          div.innerHTML = `
            <i class="${option.icon} option-icon"></i>
            <div class="option-label">${option.name}</div>
            <span class="option-price">${option.price}</span>
          `;
          elements.modalCustomization.appendChild(div);
        });
      }
      
      // Sezione Galleria
      if (elements.modalGallery) {
        elements.modalGallery.innerHTML = '';
        dish.gallery.forEach(item => {
          const div = document.createElement('div');
          div.className = 'gallery-item';
          div.innerHTML = `
            <img src="${item.src}" alt="Foto del piatto" class="gallery-image">
            <div class="gallery-overlay">
              <div class="gallery-caption">${item.caption}</div>
            </div>
          `;
          elements.modalGallery.appendChild(div);
        });
      }
      
      // Mostra il modal
      if (elements.dishModal) {
        elements.dishModal.classList.add('active');
        // Blocca lo scrolling del body quando il modal √® aperto
        document.body.style.overflow = 'hidden';
      }
    }

    // Chiude il modal
    function closeModal() {
      if (elements.dishModal) {
        elements.dishModal.classList.remove('active');
        // Riattiva lo scrolling del body
        document.body.style.overflow = 'auto';
      }
    }

    // --- INIZIALIZZAZIONE ---
    document.addEventListener('DOMContentLoaded', () => {
      // Aggiungi un piccolo ritardo per assicurare che il DOM sia completamente caricato
      setTimeout(initApp, 50);
    });
  </script>
</body>
</html>
